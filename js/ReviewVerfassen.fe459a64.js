(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ReviewVerfassen"],{"25c3":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.loaded?i("div",[i("div",{staticClass:"p-1 p-md-5"},[i("h1",{staticClass:"pl-1 pl-md-5"},[t._v("Review für "+t._s(t.title)+" schreiben")]),i("div",{staticClass:"pl-1 pl-md-5 pt-1"},[i("h3",{staticClass:"pl-1 pt-1"},[t._v("Abgabe:")]),i("h4",{staticClass:"pl-1 pt-1"},[t._v(t._s(t.comment))]),t.attachments.length>0&&void 0!==t.attachments[0].title?i("div",[i("md-button",{staticClass:"md-raised md-primary",on:{click:t.downloadSubmission}},[i("span",[t._v(t._s(t.attachments[0].title))]),i("md-icon",[t._v("get_app")])],1)],1):t._e()]),i("form",{staticClass:"pt-3",on:{submit:function(e){return e.preventDefault(),t.validateWorkshop.apply(null,arguments)}}},[i("div",{staticClass:"px-1 px-md-5"},[i("h3",{staticClass:"d-flex justify-content-start"},[t._v("Kriterien:")]),i("div",{staticClass:"mb-3"},t._l(this.form.criteria,(function(e){return i("md-card",{key:e.id,staticClass:"d-flex mt-3"},[i("md-card-expand",{staticClass:"align-items-center"},[i("md-card-actions",{attrs:{"md-alignment":"space-between"}},[i("h3",[t._v(t._s(e.title))]),i("md-card-expand-trigger",[i("md-button",{staticClass:"md-icon-button"},[i("md-icon",[t._v("keyboard_arrow_down")])],1)],1)],1),i("md-card-expand-content",[i("div",{staticClass:"d-flex flex-wrap flex-md-nowrap px-2"},[i("div",{staticClass:"pr-md-4"},[i("p",{staticClass:"md-list-item-text"},[t._v(t._s(e.content))])]),"truefalse"===e.type?i("div",[i("md-switch",{staticClass:"align-self-center",attrs:{type:"number"},model:{value:e.points,callback:function(i){t.$set(e,"points",i)},expression:"criterion.points"}},[e.points?i("div",[t._v(" Erfüllt ")]):i("div",[t._v(" Nicht Erfüllt ")])])],1):t._e(),"point"===e.type?i("div",[i("md-field",[i("label",[t._v("Punkte")]),i("md-input",{attrs:{name:"points_inp",type:"number"},on:{change:function(i){return t.validate(i,e)}},model:{value:e.points,callback:function(i){t.$set(e,"points",i)},expression:"criterion.points"}})],1)],1):t._e(),"percentage"===e.type?i("div",[i("md-field",[i("label",[t._v("Prozent")]),i("md-input",{attrs:{type:"number"},on:{change:function(i){return t.validate(i,e)}},model:{value:e.points,callback:function(i){t.$set(e,"points",i)},expression:"criterion.points"}})],1)],1):t._e(),"grade"===e.type?i("div",[i("md-field",[i("label",[t._v("Note")]),i("md-input",{attrs:{type:"number"},on:{change:function(i){return t.validate(i,e)}},model:{value:e.points,callback:function(i){t.$set(e,"points",i)},expression:"criterion.points"}})],1)],1):t._e()])])],1)],1)})),1),i("md-field",{class:t.getValidationClass("feedback")},[i("label",[t._v("Gesamtfeedback")]),i("md-textarea",{attrs:{name:"gesamtfeedback"},model:{value:t.form.feedback,callback:function(e){t.$set(t.form,"feedback",e)},expression:"form.feedback"}}),t.$v.form.feedback.required?t._e():i("span",{staticClass:"md-error"},[t._v("Feedback is required")])],1),i("div",{staticClass:"pt-3 d-flex justify-content-center justify-content-md-end"},[i("md-button",{staticClass:"md-raised prp-danger",attrs:{to:"/studentdashboard"}},[i("span",{staticClass:"p-1"},[t._v("Abbrechen")]),i("md-icon",{staticClass:"prp-danger"},[t._v("delete")])],1),i("md-button",{staticClass:"md-raised prp-success btn_save",attrs:{type:"submit"}},[i("span",{staticClass:"p-1"},[t._v("Speichern")]),i("md-icon",{staticClass:"prp-success-icon"},[t._v("done_all")])],1)],1)],1)])])]):i("div")},s=[],n=i("b85c"),r=(i("d81d"),i("9769")),o=i("1dce"),d=i("b5ae"),c=i("7962"),l={name:"WriteReview",mixins:[o["validationMixin"]],props:{done:{default:"false",type:String}},data:function(){return{loaded:!1,title:"",comment:"",attachments:null,fulfilled:[],form:{criteria:[],feedback:null}}},validations:{form:{criteria:{required:d["required"]},feedback:{required:d["required"]}}},methods:{getSubmission:function(){var t=this;r["a"].getStudentSubmission(this.$parent.username,this.$parent.pw,this.$route.params.submissionid).then((function(e){var i=e.data,a=i.criteria;t.form.criteria=a.map((function(t){return"grade"===t.type?t.points=5:t.points=0,t.feedback="",t})),t.title=i.title,t.comment=i.comment,t.attachments=i.attachments,t.loaded=!0})).catch((function(t){console.error(t)}))},onSubmit:function(){this.createReview()},createReview:function(){var t,e=this,i=[],a=Object(n["a"])(this.form.criteria);try{for(a.s();!(t=a.n()).done;){var s=t.value,o="boolean"===typeof s.points?!0===s.points?1:0:parseInt(s.points);i.push({id:s.id,points:o})}}catch(c){a.e(c)}finally{a.f()}var d=null!==this.form.feedback&&void 0!==this.form.feedback?this.form.feedback:"";r["a"].postReview(this.$parent.username,this.$parent.pw,i,d,this.$route.params.reviewid).then((function(t){console.log(t.data),e.$router.push("/studentdashboard")})).catch((function(t){console.log(t),alert("Fehler")}))},downloadSubmission:function(){var t=this;r["a"].downloadSubmission(this.$parent.username,this.$parent.pw,this.attachments[0].id).then((function(e){r["a"].writeFile(e,t.attachments[0].title)}))},getValidationClass:function(t){var e=this.$v.form[t];if(e)return{"md-invalid":e.$invalid&&e.$dirty}},validateWorkshop:function(){this.$v.$touch(),this.$v.$invalid||this.createReview},validate:function(t,e){var i=parseInt(e.points);if(i<1&&"grade"===e.type)e.points=1;else if(i<0)e.points=0;else switch(e.type){case"percentage":i>100&&(e.points=100);break;case"point":i>10&&(e.points=10);break;case"grade":i>5&&(e.points=5);break}}},mounted:function(){c["a"].Authenticated(this)?this.getSubmission():c["a"].Login(this)}},p=l,m=(i("2745"),i("2877")),u=Object(m["a"])(p,a,s,!1,null,"6df03446",null);e["default"]=u.exports},2745:function(t,e,i){"use strict";i("f0e9")},d81d:function(t,e,i){"use strict";var a=i("23e7"),s=i("b727").map,n=i("1dde"),r=n("map");a({target:"Array",proto:!0,forced:!r},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},f0e9:function(t,e,i){}}]);
//# sourceMappingURL=ReviewVerfassen.fe459a64.js.map